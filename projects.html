<!DOCTYPE html>
<html>
<head>
<title>Yunfei Luo's Personal Website</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=0.4">
<link rel="icon" type="image/x-icon" href="static/images/icon.png" />
<link rel="stylesheet" href="static/css/basic.css">
<script rel="stylesheet" src='static/js/front.js'></script>

<!-- React -->
<script src="build/react.development.js"></script>
<script src="build/react-dom.development.js"></script>
<script src="build/babel.min.js"></script>
</head>
<body>
    <header>
        <div class="sidenav">
            <li style="cursor:pointer">
                <a href="index.html" class="active">Home</a>
            </li>
            <li style="cursor:pointer">
                <a href="projects.html" class="active">Projects</a>
            </li>
            <li style="cursor:pointer">
                <a href="blogs.html" class="active">Blogs</a>
            </li>
        </div>
    </header>

    <!-- section 0 -->
    <section class = "blogs">
        <div class = "container">
            <div id="root"></div>
            <h2>Projects</h2>
            <div class="asidenav" id="list"></div>

            <script type="text/babel">
                class DocList extends React.Component {
                    constructor(props){
                        super(props);
                        this.state = {list: []};
                        this.fetch_projects();
                    }

                    fetch_projects(){
                        let url = 'https://api.github.com/repos/yunfeiluo/yunfeiluo.github.io/git/trees/master';
                        
                        let fetch_list = [];
                        // fetch 1st level
                        fetch(url)
                        .then(res => res.json())
                        .then((out) => {
                            let arr = out["tree"];
                            for (var i = 0; i < arr.length; i++){
                                if (arr[i]["path"] == "articles") {
                                    url = arr[i]["url"];

                                    // fetch 2nd level
                                    fetch(url)
                                    .then(res => res.json())
                                    .then((out) => {
                                        let arr = out["tree"];
                                        for (var i = 0; i < arr.length; i++){
                                            if (arr[i]["path"] == "projects") {
                                                url = arr[i]["url"];
                                                
                                                // fetch 3rd level
                                                fetch(url)
                                                .then(res => res.json())
                                                .then((out) => {
                                                    let arr = out["tree"];
                                                    for (var i = 0; i < arr.length; i++){
                                                        fetch_list.push(arr[i]["path"]);
                                                    }
                                                    this.setState({list: fetch_list});
                                                }).catch(err => console.error(err));

                                                break;
                                            }
                                        }
                                    }).catch(err => console.error(err));
                                    break;
                                }
                            }
                        }).catch(err => console.error(err));
                    }

                    display_docs(){
                        const list = [];
                        for (let item of this.state.list) {
                            let curr_link = "https://github.com/yunfeiluo/yunfeiluo.github.io/blob/master/articles/projects/" + item;
                            // let curr_link = "pdfjs/web/viewer.html?file=../../articles/projects/" + item;
                            list.push(
                                <div id = {item}>
                                    <a href={curr_link} target="_blank">
                                        {item}
                                    </a>
                                    <br/>
                                </div>
                            );
                        }
                        return (<div>{list}</div>);
                    }

                    // rendor funcion
                    render () {
                        // console.log(this.state.list);
                        return this.display_docs();
                    }
                }
                ReactDOM.render(
                    <DocList></DocList>,
                    document.getElementById("list")
                );
            </script>

            <br/><br/><br/><br/>
            <br/><br/><br/><br/>
        </div>
    </section>

    <!-- The end: footer -->
    <footer class="footer">
        <div class="container">
            <div class="top">
                <figure>
                    <h4>Contact Info.</h4>
                    <ul>
                        <li><a href = "mailto: yunfeiluo@umass.edu">E-mail: yunfeiluo@umass.edu</a></li>
                        <li><p>Phone: 413. 404. 2124</p></li>
                        <li><p>.</p></li>
                        <li><p>Amherst, MA, United States</p></li>
                    </ul>
                </figure>
                <figure>
                    <h4>Social Media</h4>
                    <ul>
                        <li><a href="https://twitter.com/yunfei_luo" target="_blank">
                        <img src="https://img.shields.io/badge/Twitter-blue?style=for-the-badge&logo=twitter&logoColor=white" alt="Twitter Badge"/>
                        </a></li>
                        <li><a href="https://www.facebook.com/yunfei.luo.77" target="_blank">
                        <img src="https://img.shields.io/badge/Facebook-1877F2?style=for-the-badge&logo=facebook&logoColor=white" alt="Facebook Badge"/>
                        </a></li>
                        <li><a href="https://www.instagram.com/yun_fei_luo/" target="_blank">
                        <img src="https://img.shields.io/badge/Instagram-E4405F?style=for-the-badge&logo=instagram&logoColor=white" alt="Instagram Badge"/>
                        </a></li>
                        <li><a href="https://steamcommunity.com/id/yunfeiluo/" target="_blank">
                        <img src="https://img.shields.io/badge/Steam-000000?style=for-the-badge&logo=steam&logoColor=white" alt="Steam Badge"/>
                        </a></li>
                        <!-- <li><a href="https://twitter.com/yunfei_luo" target="_blank"><u>My Twitter Profile</u></a></li>
                        <li><a href="https://www.facebook.com/yunfei.luo.77" target="_blank"><u>My Facebook Profile</u></a></li> -->
                    </ul>
                </figure>
                <div class="clearfix"></div>
            </div>
        </div>
    
        <div class="container">
            <div class="bottom">
                &copy; 2021 Yunfei Luo. 
                <br/>
                Powered by GitHub.
            </div>
        </div>
    </footer>
</body>
</html>